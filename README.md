# Obsidian Canvas Viewer

**Canvas Viewer** 是一个为 Obsidian Canvas（白板）设计的增强插件。本项目主要是以 **Vibe Coding** 的方式实现（即通过直觉、AI 辅助快速迭代开发）。它允许你在侧边栏中查看、编辑 Canvas 选中的节点内容，并提供了强大的“文本节点转 Markdown 笔记”功能。

## ✨ 核心功能

### 1. 侧边栏实时查看
- **自动同步**：在 Canvas 中点击任意节点，侧边栏会自动显示该节点的内容。
- **支持多种类型**：支持文本节点、Markdown 文件、图片、PDF、网页链接以及分组（Group）。
- **大图预览**：对于 Canvas 中缩小的图片或文档，无需缩放白板即可在侧边栏清晰查看。

### 2. ⚡ 文本节点转笔记 (Convert to Note)
这是一个极其强大的功能，允许你快速将白板上的灵感碎片整理成正式笔记。

- **一键转换**：在文本节点查看界面，提供两个按钮：
  - **📄+ (快速提取)**：自动提取第一行标题或内容作为文件名，直接保存。
  - **💾 (另存为)**：弹出对话框，允许自定义文件名。
- **智能替换**：保存成功后，插件会**自动删除** Canvas 上的原文本节点，并在**原位置**创建指向新文件的文件卡片。
- **属性保留**：新创建的文件卡片会完美继承原文本节点的**尺寸、位置和颜色**。
- **遵循原生设置**：新文件的保存位置严格遵循 Obsidian 设置中的“新建笔记存放位置”（如：当前文件夹、附件文件夹或指定文件夹）。

### 3. 直接编辑
- **编辑模式**：支持在侧边栏直接编辑文本节点或 Markdown 文件内容。
- **实时预览**：支持源码模式和实时预览模式切换。

### 4. 视图固定 (Pin)
- 点击查看器顶部的图钉图标 📌，可以锁定当前显示的内容。即使你在 Canvas 中选择了其他节点，查看器内容也不会改变，方便对照阅读或编辑。

---

## 📖 使用指南

1. **开启/关闭**：
   - 打开任意 Canvas 文件。
   - 点击 Canvas 视图右侧悬浮的 **“对话气泡”图标** 开启查看器。
   - 或者使用命令面板搜索 `Open Canvas Viewer`。

2. **查看内容**：
   - 单击 Canvas 上的任意节点，右侧面板（或设置的位置）即显示内容。

3. **转换文本为文件**：
   - 选中一个文本节点。
   - 在侧边栏顶部点击 **提取图标** 或 **保存图标**。
   - 观察 Canvas，文本框将自动变为文件卡片。

---

## ⚙️ 插件设置

可以在 `设置` -> `Canvas Viewer` 中进行配置：

- **自动打开查看器**：打开 Canvas 文件时是否自动启动查看器。
- **查看器位置**：选择显示在左侧边栏还是右侧边栏。
- **启用编辑功能**：是否允许在查看器中修改内容。
- **默认编辑模式**：选择默认是“实时预览”还是“源码模式”。

---

## 🛠️ 安装与开发

### 手动安装
1. 下载最新的 `main.js`, `styles.css`, `manifest.json` 文件。
2. 将它们放入你的仓库 `.obsidian/plugins/canvas-viewer/` 文件夹中。
3. 在 Obsidian 设置中启用插件。

### 源码构建
如果您想自己修改代码：

```bash
# 克隆仓库
git clone [repository-url]

# 安装依赖
npm install

# 编译插件
npm run build
```

---

## 🤝 贡献

欢迎提交 Issue 或 Pull Request 来改进这个插件！

## ☕ Buy Me a Coffee

如果这个插件对你有帮助，欢迎请我喝杯咖啡！

<div align="center">
  <table>
    <tr>
      <td align="center">
        <img src="image/alipay.jpg" alt="Alipay" width="200" />
        <br/>支付宝 (Alipay)
      </td>
      <td align="center">
        <img src="image/wechat.jpg" alt="WeChat" width="200" />
        <br/>微信支付 (WeChat Pay)
      </td>
    </tr>
  </table>
</div>
